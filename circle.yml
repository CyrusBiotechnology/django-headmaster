dependencies:
  pre:
    - pip install pycodestyle django

    # Set up a Django project to test with
    - django-admin.py startproject headmaster

    # Inject minimum configuration to activate Headmaster
    - cat test_harnesses/django_settings_fragment.py >> headmaster/headmaster/settings.py


test:
  pre:
    - pycodestyle . --exclude="env,venv,build,.git,lib" --ignore="E501" --show-source

    # Start a Django server
    - ./headmaster/manage.py runserver 127.0.0.0:8000:
      background: true
  override:

    # Run a simple functional test
    - /test_harnesses/functional_test.sh 8000 SyONDFv4a
